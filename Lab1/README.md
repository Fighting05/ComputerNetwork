# 计算机网络实验一：多线程聊天室

本项目基于 Windows 环境和 Winsock2 API，使用 C++ 实现了一个支持多用户、跨控制台进行实时聊天的客户端/服务器模型。

## 主要功能

- **多用户实时聊天**：服务器采用多线程模型，可以同时处理多个客户端的连接和消息。
- **群聊与私聊**：支持向所有在线用户广播消息，也支持通过 `/msg` 命令向特定用户发送私密消息。
- **用户状态通知**：用户上线和下线时，所有客户端都会收到通知。新用户上线时会收到当前在线用户列表。
- **中英文混合聊天**：客户端对输入进行编码转换（GBK -> UTF-8），确保中文在跨控制台传输时不会出现乱码。
- **图形化界面 (可选)**: `gui-version` 目录中提供了一个基于 ImGui 和 GLFW 的图形化客户端。

## 文件结构

```
.
├── server.cpp          # 服务器端源码
├── client.cpp          # 命令行客户端源码
├── server.exe          # 服务器可执行文件
├── client.exe          # 命令行客户端可执行文件
├── 报告/
│   └── ...             # 实验报告
└── gui-version/
    └── build/
        └── chat-gui.exe # 图形化客户端可执行文件
```

## 如何编译

本项目依赖 C++11 (用于多线程) 和 `ws2_32` 库。

**编译服务器:**
```bash
g++ -std=c++11 server.cpp -o server.exe -lws2_32 -static
```

**编译客户端:**
```bash
g++ -std=c++11 client.cpp -o client.exe -lws2_32 -static
```

## 如何运行

1.  **启动服务器**：双击运行 `server.exe`，服务器将启动并开始在 `127.0.0.1:1023` 端口监听。
2.  **启动客户端**：
    *   **命令行版**: 运行一个或多个 `client.exe`。程序会提示输入昵称，输入后即可加入聊天室。
    *   **图形版**: 运行 `gui-version/build/chat-gui.exe`。

## 使用说明

- **加入聊天**: 运行客户端，输入一个未被占用的昵称即可。
- **发送群聊消息**: 直接在输入框输入消息并按回车。
- **发送私聊消息**: 使用以下格式：
  ```
  /msg <目标用户名> <你要发送的消息>
  ```
  例如: `/msg Alice 你好`
- **退出聊天**: 在命令行客户端中，输入 `/quit` 并按回车。

